<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 880 420" fill="none">
  <style>
    .title { font: 700 14px system-ui, -apple-system, sans-serif; fill: #e6edf3; }
    .phase { font: 700 10px system-ui, sans-serif; letter-spacing: 0.08em; }
    .item-label { font: 600 11px system-ui, sans-serif; fill: #e6edf3; }
    .item-sub { font: 400 9.5px system-ui, sans-serif; fill: #8b949e; }
    .footer { font: 500 9.5px system-ui, sans-serif; fill: #6e7681; }
  </style>
  <defs>
    <marker id="arr" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="8" markerHeight="8" orient="auto">
      <path d="M1 1L9 5L1 9" stroke="#6e7681" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="880" height="420" rx="12" fill="#0d1117" stroke="#30363d" stroke-width="1"/>

  <!-- Title -->
  <text x="440" y="32" text-anchor="middle" class="title">Snowflake Deployment Architecture</text>

  <!-- ── Column 1: Scan Sources ── -->
  <rect x="24" y="52" width="192" height="6" rx="3" fill="#29b5e8" opacity="0.7"/>
  <text x="120" y="76" text-anchor="middle" class="phase" fill="#29b5e8">SCAN SOURCES</text>

  <g transform="translate(36, 88)">
    <circle cx="6" cy="6" r="3.5" fill="#29b5e8" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Cortex Agents</text>
    <text x="16" y="22" class="item-sub">Agent names, models, tools</text>
  </g>
  <g transform="translate(36, 118)">
    <circle cx="6" cy="6" r="3.5" fill="#29b5e8" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Native MCP Servers</text>
    <text x="16" y="22" class="item-sub">SHOW MCP SERVERS discovery</text>
  </g>
  <g transform="translate(36, 148)">
    <circle cx="6" cy="6" r="3.5" fill="#29b5e8" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Cortex Search</text>
    <text x="16" y="22" class="item-sub">RAG service inventory</text>
  </g>
  <g transform="translate(36, 178)">
    <circle cx="6" cy="6" r="3.5" fill="#29b5e8" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Snowpark Containers</text>
    <text x="16" y="22" class="item-sub">Container service images</text>
  </g>
  <g transform="translate(36, 208)">
    <circle cx="6" cy="6" r="3.5" fill="#29b5e8" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Query History</text>
    <text x="16" y="22" class="item-sub">365-day AI observability</text>
  </g>
  <g transform="translate(36, 238)">
    <circle cx="6" cy="6" r="3.5" fill="#29b5e8" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Governance</text>
    <text x="16" y="22" class="item-sub">Roles, grants, data classification</text>
  </g>

  <!-- Arrow 1 -->
  <g transform="translate(226, 168)">
    <path d="M0 0L14 16L0 32" stroke="#6e7681" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M10 0L24 16L10 32" stroke="#6e7681" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round" opacity="0.5"/>
  </g>

  <!-- ── Column 2: agent-bom API ── -->
  <rect x="252" y="52" width="192" height="6" rx="3" fill="#58a6ff" opacity="0.7"/>
  <text x="348" y="76" text-anchor="middle" class="phase" fill="#58a6ff">AGENT-BOM API (:8422)</text>

  <g transform="translate(264, 90)">
    <circle cx="6" cy="6" r="3.5" fill="#58a6ff" opacity="0.5"/>
    <text x="16" y="10" class="item-label">FastAPI Server</text>
    <text x="16" y="22" class="item-sub">Scan, registry, compliance</text>
  </g>
  <g transform="translate(264, 126)">
    <circle cx="6" cy="6" r="3.5" fill="#58a6ff" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Snowflake Job Store</text>
    <text x="16" y="22" class="item-sub">Scan results → SF tables</text>
  </g>
  <g transform="translate(264, 162)">
    <circle cx="6" cy="6" r="3.5" fill="#58a6ff" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Snowflake Fleet Store</text>
    <text x="16" y="22" class="item-sub">Agent registry → SF tables</text>
  </g>
  <g transform="translate(264, 198)">
    <circle cx="6" cy="6" r="3.5" fill="#58a6ff" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Snowflake Policy Store</text>
    <text x="16" y="22" class="item-sub">Policy rules → SF tables</text>
  </g>
  <g transform="translate(264, 234)">
    <circle cx="6" cy="6" r="3.5" fill="#58a6ff" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Auto Auth</text>
    <text x="16" y="22" class="item-sub">Key-pair or password detection</text>
  </g>

  <!-- Arrow 2 -->
  <g transform="translate(454, 168)">
    <path d="M0 0L14 16L0 32" stroke="#6e7681" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M10 0L24 16L10 32" stroke="#6e7681" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round" opacity="0.5"/>
  </g>

  <!-- ── Column 3: Snowflake Runtime ── -->
  <rect x="480" y="52" width="192" height="6" rx="3" fill="#3fb950" opacity="0.7"/>
  <text x="576" y="76" text-anchor="middle" class="phase" fill="#3fb950">SNOWFLAKE RUNTIME</text>

  <g transform="translate(492, 90)">
    <circle cx="6" cy="6" r="3.5" fill="#3fb950" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Snowpark Container</text>
    <text x="16" y="22" class="item-sub">Dockerfile.snowpark + setup.sql</text>
  </g>
  <g transform="translate(492, 126)">
    <circle cx="6" cy="6" r="3.5" fill="#3fb950" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Streamlit in Snowflake</text>
    <text x="16" y="22" class="item-sub">6-tab SiS dashboard</text>
  </g>
  <g transform="translate(492, 162)">
    <circle cx="6" cy="6" r="3.5" fill="#3fb950" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Native App</text>
    <text x="16" y="22" class="item-sub">Marketplace distribution</text>
  </g>
  <g transform="translate(492, 198)">
    <circle cx="6" cy="6" r="3.5" fill="#3fb950" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Shared Tables</text>
    <text x="16" y="22" class="item-sub">Jobs, fleet, policies</text>
  </g>
  <g transform="translate(492, 234)">
    <circle cx="6" cy="6" r="3.5" fill="#3fb950" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Activity Timeline</text>
    <text x="16" y="22" class="item-sub">Query history + AI observability</text>
  </g>

  <!-- Arrow 3 -->
  <g transform="translate(682, 168)">
    <path d="M0 0L14 16L0 32" stroke="#6e7681" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M10 0L24 16L10 32" stroke="#6e7681" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round" opacity="0.5"/>
  </g>

  <!-- ── Column 4: UI Surfaces ── -->
  <rect x="708" y="52" width="148" height="6" rx="3" fill="#d29922" opacity="0.7"/>
  <text x="782" y="76" text-anchor="middle" class="phase" fill="#d29922">UI SURFACES</text>

  <g transform="translate(720, 90)">
    <circle cx="6" cy="6" r="3.5" fill="#d29922" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Next.js Cloud UI</text>
    <text x="16" y="22" class="item-sub">13-section dashboard</text>
  </g>
  <g transform="translate(720, 126)">
    <circle cx="6" cy="6" r="3.5" fill="#d29922" opacity="0.5"/>
    <text x="16" y="10" class="item-label">SiS Dashboard</text>
    <text x="16" y="22" class="item-sub">6 tabs inside Snowsight</text>
  </g>
  <g transform="translate(720, 162)">
    <circle cx="6" cy="6" r="3.5" fill="#d29922" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Governance View</text>
    <text x="16" y="22" class="item-sub">Roles + grants + classification</text>
  </g>
  <g transform="translate(720, 198)">
    <circle cx="6" cy="6" r="3.5" fill="#d29922" opacity="0.5"/>
    <text x="16" y="10" class="item-label">Activity View</text>
    <text x="16" y="22" class="item-sub">AI observability timeline</text>
  </g>
  <g transform="translate(720, 234)">
    <circle cx="6" cy="6" r="3.5" fill="#d29922" opacity="0.5"/>
    <text x="16" y="10" class="item-label">REST API Docs</text>
    <text x="16" y="22" class="item-sub">OpenAPI on :8422/docs</text>
  </g>

  <!-- Separator line -->
  <line x1="40" y1="284" x2="840" y2="284" stroke="#30363d" stroke-width="1"/>

  <!-- Auth flow -->
  <g transform="translate(40, 300)">
    <rect width="800" height="44" rx="8" fill="#161b22" stroke="#30363d" stroke-width="1"/>
    <text x="400" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="700" fill="#8b949e" letter-spacing="0.05em">AUTHENTICATION</text>
    <text x="400" y="34" text-anchor="middle" class="footer">SNOWFLAKE_ACCOUNT + SNOWFLAKE_USER + auth (key-pair or password)  ·  API auto-detects and switches to Snowflake persistence</text>
  </g>

  <!-- Setup flow -->
  <g transform="translate(40, 358)">
    <rect width="800" height="44" rx="8" fill="#161b22" stroke="#30363d" stroke-width="1"/>
    <text x="400" y="18" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" font-weight="700" fill="#8b949e" letter-spacing="0.05em">SETUP</text>
    <text x="400" y="34" text-anchor="middle" class="footer">pip install 'agent-bom[api,snowflake]'  ·  Set env vars  ·  agent-bom api  ·  Tables auto-created on first scan</text>
  </g>
</svg>